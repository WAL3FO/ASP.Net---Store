@using Microsoft.AspNet.Identity
@{ DataEntities db = new DataEntities(); }
<!DOCTYPE html>
            <html>
            <head>
                <meta charset="utf-8" />
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>CRT Project</title>

                <link href="~/dist/css/adminlte.min.css" rel="stylesheet" />
                <link href="~/plugins/overlayScrollbars/css/OverlayScrollbars.min.css" rel="stylesheet" />
                <link href="~/plugins/fontawesome-free/css/all.min.css" rel="stylesheet" />
                <link href="~/dist/css/drops.css" rel="stylesheet" />

                <script src="~/pluginsjquery/jquery.min.js"></script>
                <script src="~/pluginsbootstrap/js/bootstrap.bundle.min.js"></script>
                <script src="~/pluginsoverlayScrollbars/js/jquery.overlayScrollbars.min.js"></script>
                <script src="~/dist/js/adminlte.js"></script>
                <script src="~/pluginsjquery-mousewheel/jquery.mousewheel.js"></script>
                <script src="~/pluginsraphael/raphael.min.js"></script>
                <script src="~/pluginsjquery-mapael/jquery.mapael.min.js"></script>
                <script src="~/pluginsjquery-mapael/maps/usa_states.min.js"></script>
                <script src="~/pluginschart.js/Chart.min.js"></script>
                <script src="~/dist/js/demo.js"></script>

            </head>
            <body class="hold-transition dark-mode">
                <div class="wrapper">

                    <nav class="main-header navbar navbar-expand navbar-dark" style="margin-left: 115px;margin-right: 115px;">
                        <ul class="navbar-nav">
                            <li class="nav-item d-none d-sm-inline-block">
                                <a href="/" class="nav-link">Home</a>
                            </li>

                            <li class="nav-item d-none d-sm-inline-block">
                                <a href="#" class="nav-link">Contact</a>
                            </li>
                        </ul>

                        <!-- Right navbar links -->
                        <ul class="navbar-nav ml-auto">
                            <li class="nav-item">
                                <a class="nav-link" data-widget="navbar-search" href="/Search" role="button">
                                    <i class="fas fa-search"></i>
                                </a>
                                <div class="navbar-search-block">
                                    <form class="form-inline">
                                        <div class="input-group input-group-sm">
                                            <input class="form-control form-control-navbar" type="search" placeholder="Search" aria-label="Search">
                                            <div class="input-group-append">
                                                <button class="btn btn-navbar" type="submit">
                                                    <i class="fas fa-search"></i>
                                                </button>
                                                <button class="btn btn-navbar" type="button" data-widget="navbar-search">
                                                    <i class="fas fa-times"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </li>


                            <!-- Messages Dropdown Menu -->
                            <li class="nav-item dropdown">
            @if (Request.IsAuthenticated) {
                        var userId = User.Identity.GetUserId().ToString();
                        var count = db.iCarts.Where(p => p.account_id == userId).ToList().Count;

                        <a class="nav-link" href="/Carts">
                            <i class="fas fa-shopping-cart"></i> Carts
                             @Html.ActionLink(count.ToString(), "Index", "Carts", routeValues: null, htmlAttributes: new { title = "Carts", @class = "badge badge-danger navbar-badge" })
                        </a>
            }
                                <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                                    <a href="#" class="dropdown-item">
                                        <!-- Message Start -->
                                        <div class="media">
                                            <img src="dist/img/user1-128x128.jpg" alt="User Avatar" class="img-size-50 mr-3 img-circle">
                                            <div class="media-body">
                                                <h3 class="dropdown-item-title">
                                                    Brad Diesel
                                                    <span class="float-right text-sm text-danger"><i class="fas fa-star"></i></span>
                                                </h3>
                                                <p class="text-sm">Call me whenever you can...</p>
                                                <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
                                            </div>
                                        </div>
                                        <!-- Message End -->
                                    </a>
                                    <div class="dropdown-divider"></div>
                                    <a href="#" class="dropdown-item">
                                        <!-- Message Start -->
                                        <div class="media">
                                            <img src="dist/img/user8-128x128.jpg" alt="User Avatar" class="img-size-50 img-circle mr-3">
                                            <div class="media-body">
                                                <h3 class="dropdown-item-title">
                                                    John Pierce
                                                    <span class="float-right text-sm text-muted"><i class="fas fa-star"></i></span>
                                                </h3>
                                                <p class="text-sm">I got your message bro</p>
                                                <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
                                            </div>
                                        </div>
                                        <!-- Message End -->
                                    </a>
                                    <div class="dropdown-divider"></div>
                                    <a href="#" class="dropdown-item">
                                        <!-- Message Start -->
                                        <div class="media">
                                            <img src="dist/img/user3-128x128.jpg" alt="User Avatar" class="img-size-50 img-circle mr-3">
                                            <div class="media-body">
                                                <h3 class="dropdown-item-title">
                                                    Nora Silvester
                                                    <span class="float-right text-sm text-warning"><i class="fas fa-star"></i></span>
                                                </h3>
                                                <p class="text-sm">The subject goes here</p>
                                                <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
                                            </div>
                                        </div>
                                        <!-- Message End -->
                                    </a>
                                    <div class="dropdown-divider"></div>
                                    <a href="#" class="dropdown-item dropdown-footer">See All Messages</a>
                                </div>
                            </li>

                            @if (Request.IsAuthenticated)
                            {
                <li class="nav-item">
                    @Html.ActionLink("Account", "Index", "Manage", routeValues: null, htmlAttributes: new { title = "Manage", @class = "nav-link" })
                </li>
 if (this.User.IsInRole("Admin"))
                {
<li class="nav-item">
    <a href="/Admin">
        <button type="button" class="btn btn-success btn-xs">Administration</button>
    </a>
</li>
 }
using (Html.BeginForm("LogOff", "Account", new { productId = 1 }, FormMethod.Post))
{
@Html.AntiForgeryToken()
                    <li class="nav-item">
                        <button type="submit" class="btn btn-danger btn-xs">Sign Out</button>
                    </li>
 }

            }
            else
            {
<li class="nav-item d-none d-sm-inline-block">
    @Html.ActionLink("Register", "Register", "Account", routeValues: null, htmlAttributes: new { id = "registerLink", @class = "nav-link" })
</li>

                <li class="nav-item d-none d-sm-inline-block">
                    @Html.ActionLink("Log in", "Login", "Account", routeValues: null, htmlAttributes: new { id = "loginLink", @class = "nav-link" })
                </li>
}
                        </ul>
                    </nav>

                    <div class="content-wrapper" style="margin-left: 100px;margin-right: 100px;">
                        <!-- Content Header (Page header) -->
                        <div class="content-header">
                            <div class="container-fluid">
                                <div class="row mb-2">
                                    <div class="col-sm-6">
                                        <h1 class="m-0"></h1>
                                    </div>
                                    <!-- /.col -->
                                    <div class="col-sm-6">
                                    </div>
                                    <!-- /.col -->
                                </div>
                                <!-- /.row -->
                            </div>
                            <!-- /.container-fluid -->
                        </div>

                        @{ var countProducts = db.iProducts.ToList().Count;
                                        var countOrders = db.iOrders.ToList().Count; }

                        <section class="content">
                            <div class="container-fluid">
                                <!-- Info boxes -->
                                <div class="row">
                                    <div class="col-12 col-sm-6 col-md-3">
                                        <div class="info-box">
                                            <span class="info-box-icon bg-info elevation-1"><i class="fas fa-tshirt"></i></span>
                                            <div class="info-box-content">
                                                <span class="info-box-text">Total Products</span>
                                                <span class="info-box-number">
                                                    @Html.Label(countProducts.ToString(), new { @class = "col-md-2 control-label" })
                                                </span>
                                            </div>
                                            <!-- /.info-box-content -->
                                        </div>
                                        <!-- /.info-box -->
                                    </div>
                                    <!-- /.col -->
                                    <div class="col-12 col-sm-6 col-md-3">
                                        <div class="info-box mb-3">
                                            <span class="info-box-icon bg-danger elevation-1"><i class="fas fa-shopping-cart"></i></span>
                                            <div class="info-box-content">
                                                <span class="info-box-text">Total Orders</span>
                                                <span class="info-box-number">@Html.Label(countOrders.ToString(), new { @class = "col-md-2 control-label" })</span>
                                            </div>
                                            <!-- /.info-box-content -->
                                        </div>
                                        <!-- /.info-box -->
                                    </div>

                                </div>

                                @RenderBody()

                            </div>
                        </section>
                    </div>

                    <footer class="main-footer" style="margin-left: 115px;margin-right: 115px;">
                        <strong>Copyright &copy; 2014-2021 <a href="https://softechers.com">Softechers</a>.</strong>
                        All rights reserved.
                        <div class="float-right d-none d-sm-inline-block">
                            <b>Version</b> 3.1.0
                        </div>
                    </footer>
                </div>

                @RenderSection("scripts", required: false)

                <style type="text/css">
                    .btn-xs {
                        padding: .125rem .55rem;
                        font-size: .75rem;
                        line-height: 2.5;
                        border-radius: .15rem;
                        margin-right: 5px;
                    }
                </style>
            </body>
        </html>